<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Customer Dashboard - Evaluation Page</title>
    <link rel="stylesheet" href="../Shared.css" />

    <style>
      .Evaluation-container {
        text-align: center;
      }

      form {
        max-width: 500px;
        margin: 0 auto;
      }

      #rating {
        width: 150px;
      }

      .upload-label {
        display: inline-block;
        margin-top: 10px;
      }

      .upload-label button {
        background-color: #000;
        color: #fff;
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
      }

      #upload {
        display: block;
        margin: 0 120px;
        padding: 10px;
        cursor: pointer;
      }

      #comment {
        width: 100%;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
        resize: horizontal;
        margin-top: 10px;
        cursor: pointer;
      }

      #submit-btn {
        display: block;
        background-color: #924b12;
        margin-top: 10px;
        color: #fff;
        border: none;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
      }

      #submit-btn:hover {
        background-color: #7a3d0e;
      }

      .restaurant-form-container,
      .restaurant-list-container {
        width: 50%;

        text-align: center;
        display: inline-block;
        background-color: #ded0ba;
        font-size: 1em;
        border-radius: 20px;
        padding: 20px;
        margin: 20px 0;
      }

      .restaurant-form-container h3,
      .restaurant-list-container h3 {
        background-color: #924b12;
        color: #fff;
        padding: 10px;
        border-radius: 10px;
        font-size: 1.25em;
      }

      select:hover {
        cursor: pointer;
      }

      select {
        font-size: 0.8em;
        border: 1px solid #ccc;
        border-radius: 5px;
        padding: 8px;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <header>
      <div class="navigation">
        <img src="../images/logo1.png" alt="صورة" class="logo" />
        <nav>
          <ul>
            <li><a href="../Home.html" accesskey="h">Home Page</a></li>
            <li><a href="RestaurantList.html" accesskey="c">Customer Dashbord</a></li>
            <li><a href="../Owner/Owner.html" accesskey="o">Owner Dashbord</a></li>
          </ul>
        </nav>
      </div>

      <h1>Customer Dashboard</h1>
    </header>

    <main>
      <h2>Evaluation Page</h2>
      <div class="state">
        <p><a href="../Home.html">Home Page</a> > <a href="RestaurantList.html">Customer Dashboard</a>> <a href="cart1.html">Cart page</a>>Evaluation Page</p>
      </div>

      <div class="Evaluation-container">
        <div class="restaurant-form-container">
          <h3>BBQ Barn House</h3>
          <form id="evaluation-form">
            <label for="rating">Rating</label><br />
            <input type="number" id="rating" name="rating" min="1" max="5" step="0.25" placeholder="Enter your rating (1-5)" />
            <br /><br />
            <label for="comment">Comment</label><br />
            <textarea id="comment" name="comment" rows="4"></textarea><br /><br />
            <label for="upload" class="upload-label">Upload Picture:</label>
            <input type="file" id="upload" name="upload" style="display: none" />
            <button onclick="document.getElementById('upload').click()">Choose File</button>
            <input type="submit" id="submit-btn" value="Add" />
          </form>
        </div>

        <div class="restaurant-list-container">
          <h3>Evaluation of Other Restaurants</h3>
          <div class="restaurant-list">
           <select id="restaurants-dropdown">
              <option disabled selected>Select a restaurant</option>
              <option value="evaluation1.html">Tasty Tacos Express</option>
              <option value="evaluation2.html">Pizza Palace</option>
              <option value="evaluation3.html">Wok N' Roll Asian Cuisine</option>
              <option value="evaluation5.html">Fresh & Healthy Greens</option>
              <option value="evaluation6.html">Burger Bites</option>
            </select>
          </div>
        </div>
      </div>
    </main>
    <footer>
      <div class="social-icons">
        <img src="../images/facebook.jpg" alt="FaceBoook" />
        <img src="../images/x.jpg" alt="X" />
        <img src="../images/instagram.jpg" alt="Insatgram" />
      </div>
      <p>&copy; Flavor Fleet</p>
    </footer>
    <script>
document.addEventListener("DOMContentLoaded", function () {
  const dropdown = document.getElementById("restaurants-dropdown");
  const form = document.getElementById("evaluation-form");
  let selectedRestaurantID = ''; // تعريف المتغير لقيمة ID للمطعم المحدد

  // تحديث قيمة selectedRestaurantID عند تغيير المطعم المختار
  dropdown.addEventListener("change", function () {
    const selectedIndex = dropdown.selectedIndex;
    if (selectedIndex !== -1) {
      const selectedOption = dropdown.options[selectedIndex];
      selectedRestaurantID = selectedOption.value; // قيمة ID للمطعم بدلاً من الاسم
    }
  });

  form.addEventListener("submit", function (event) {
    event.preventDefault();

    const rating = parseFloat(document.getElementById("rating").value);
    const comment = document.getElementById("comment").value;
    const currentRestaurantName = document.querySelector(".restaurant-form-container h3").innerText; // اسم المطعم الحالي

    // التحقق من اختيار المطعم وتقييمه وتقديم التعليق
    if (!selectedRestaurantID) {
      alert("Validation Error:\nPlease select a restaurant.");
      return; // Stop further execution
    }

    if (!rating || rating < 1 || rating > 5) {
      alert("Validation Error:\nPlease provide a rating between 1 and 5.");
      return; // Stop further execution
    }

    // إذا تحققت جميع الشروط، ستتم إرسال البيانات
    alert(`Thank you for your feedback!\nYour rating for restaurant ${currentRestaurantName} is ${rating}`);
    window.location.href = selectedRestaurantID; // Redirect to selected restaurant page
  });
});



</script>
  </body>
</html>